fips_begin_lib(asmx_6502)
    fips_dir(src)
    fips_files(asmx.c asmx.h asm6502.c)
fips_end_lib()
target_include_directories(asmx_6502 INTERFACE src)
target_compile_definitions(asmx_6502 PUBLIC ASMX_6502)

fips_begin_lib(asmx_z80)
    fips_dir(src)
    fips_files(asmx.c asmx.h asmz80.c)
fips_end_lib()
target_include_directories(asmx_z80 INTERFACE src)
target_compile_definitions(asmx_z80 PUBLIC ASMX_Z80)

if (FIPS_GCC OR FIPS_CLANG)
    target_compile_options(asmx_6502 PRIVATE -Wno-implicit-fallthrough)
    target_compile_options(asmx_z80 PRIVATE -Wno-implicit-fallthrough)
endif()
